<div data---="largeform__common.form__if:backupsform;title:@(Backups);icon:far fa-history;scrollbar:1;width:600" class="hidden">
	<div data-scope="backupsform">
		<div class="padding sessions" data-bind="?__template">
			<script type="text/html">
				{{ foreach m in value }}
					<div class="item">
						<div class="label"><i class="{{ m.icon }}"></i>{{ m.name }}</div>
						<dl>
							<dt>@(User)</dt>
							<dd class="b">{{ m.username }}</dd>
							<dt>@(Device)</dt>
							<dd class="b">{{ m.ua }}</dd>
							<dt>@(Created)</dt>
							<dd>{{ m.dtcreated | format('yyyy-MM-dd HH:mm') }}</dd>
						</dl>
						<div class="help">
							<span class="link green exec" data-exec="?/restore" data-id="{{ m.id }}"><i class="far fa-history mr5"></i>@(Restore backup)</span>
						</div>
						<hr />
					</div>
				{{ end }}
			</script>
		</div>
	</div>
	<nav>
		<button name="cancel" style="width:100%;max-width:100%">@(Close)</button>
	</nav>
</div>

<script>

	PLUGIN('backupsform', function(exports) {
		exports.restore = function(el) {
			SETTER('approve/show', '@(Are you sure you want to restore selected backup?)', '"check-circle" @(Restore) #68B25B', function() {
				AJAX('GET /api/docs/' + common.document.id + '/backups/' + el.attrd('id'), ASETTER('message/response', function(response) {
					SET('common.document.body', response.body);
					EXEC('common/saveforce', true);
					NULL('common.form');
				}));
			});
		};
	});

</script>