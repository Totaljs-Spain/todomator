@{title('Personal tasks and notes')}
@{layout('')}

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=10" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover" />
	<meta name="robots" content="all,follow" />
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.55.0/codemirror.min.css" />
	<link rel="stylesheet" href="https://cdn.componentator.com/spa.min@18pro.css" />
	<script src="https://cdn.componentator.com/spa.min@18.js"></script>
	@{if DEBUG}
	<script src="https://cdn.componentator.com/livereload.js"></script>
	@{fi}
	<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.55.0/codemirror.min.js"></script>
	@{import('meta', 'head', 'landing.css + ui.css', 'ui.js', 'favicon.ico')}
</head>
<body data---="exec">

	<div data---="loading__null__style:2" class="ui-loading"></div>
	<div data---="message__null__button:@(OK);style:2"></div>
	<div data---="importer__common.form__if:loginwindow;url:/forms/login.html"></div>
	@{if PREF.initcredentials}@{json(PREF.initcredentials, 'initcredentials')}@{fi}

	<script>
		var common = {};

		common.initcredentials = PARSE('#initcredentials');

		PLUGIN('common', function(exports) {

			ON('ready', function() {
				SET('common.form', 'loginwindow');
				SETTER(true, 'loading/hide', 1000);
				if (NAV.query.token) {
					AJAX('POST /api/account/login/token/', { token: NAV.query.token }, function(response) {
						if (response.success)
							location.href = '/';
					});
				}
			});
		});
	</script>

</body>
</html>